#!/usr/bin/env node

var program = require('commander');
var Bootstrap = reqiire('../lib/bootstrap')

program
  //.usage('viking build [scripts] [styles] [files]')
  .usage('')
  .option('-f, --filter [filter]', 'only start the named service (etcd, host)')

program.parse(process.argv);

function stopStacks(done){
  if(program.filter && program.filter!='stack'){
    return done()
  }
  Bootstrap.stopStacks(done)
}

function stopEtcd(done){
  if(program.filter && program.filter!='etcd'){
    return done()
  }
  Bootstrap.stopEtcd(done)

}

function stopHost(done){

  if(program.filter && program.filter!='host'){
    return done()
  }
  Bootstrap.stopHost(done)
  

}

function cleanUp(done){
  tools.cleanAll(done)
}

async.series([

  stopStacks,

  stopHost,

  stopEtcd,

  cleanUp
  
], function(){
  utils.log('viking-master', 'stopped');
})