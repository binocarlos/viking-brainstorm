#!/usr/bin/env node

var program = require('commander');

program
  .usage('')

program.on('--help', function(){
  console.log('  Examples:');
  console.log();
  console.log('    # stop the viking master');
  console.log('    $ viking master stop');
  console.log();
  console.log();
  console.log();
  process.exit();
});

var async = require('async');
var utils = require('component-consoler');
var path = require('path');
var fs = require('fs');
var log = utils.log;
var spawn = require('child_process').spawn
var config = require('../lib/config')();
var Etcd = require('../lib/services/etcd');
var Registry = require('../lib/services/registry');


console.log('');

async.series([

  function(next){
    utils.log('etcd', 'stopping');

    var etcd = Etcd(config);

    etcd.on('stopped', function(){
      utils.log('etcd', 'stopped');
    })

    etcd.on('removed', function(){
      utils.log('etcd', 'removed');
    })

    etcd.stop(true, next);
  }/*,

  function(next){
    utils.log('registry', 'stopping');

    var registry = Registry(config);

    registry.on('stopped', function(){
      utils.log('registry', 'stopped');
    })

    registry.on('removed', function(){
      utils.log('registry', 'removed');
    })

    registry.stop(true, next);
  }*/

], function(){
  utils.log('viking-master', 'stopped');
})