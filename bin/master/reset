#!/usr/bin/env node

var program = require('commander');

program
  .usage('')
 
program.on('--help', function(){
  console.log('  Examples:');
  console.log();
  console.log('    # start viking');
  console.log('    $ viking start');
  console.log();
  console.log();
  console.log();
  process.exit();
});

// parse argv

var async = require('async');
var utils = require('component-consoler');
var path = require('path');
var fs = require('fs');
var log = utils.log;
var spawn = require('child_process').spawn
var config = require('../../lib/config')();
var Etcd = require('../../lib/services/etcd');
var Registry = require('../../lib/services/registry');

var uid = parseInt(process.env.SUDO_UID);

if(!uid){
  console.error('you must use sudo for viking master reset')
  process.exit(1);
}

async.series([
  function(next){
        
    var etcd = Etcd(config);

    etcd.on('reset', function(path){
      utils.log('remove', path);
    })

    etcd.reset(next);
  }

], function(){
  utils.log('viking-master', 'reset');
})